{% extends "pdf/base.html" %}

{% block content %}
<!-- =================================================================
     COVER PAGE - Minimalist Professional Design
     ================================================================= -->
<div class="cover-page">
    <div class="cover-content">
        <!-- Minimalist Icon -->
        <div class="cover-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
        </div>

        <!-- Title -->
        <h1 class="cover-title">{{ recording.title }}</h1>
        <p class="cover-subtitle">Meeting Analysis Report</p>

        <!-- Metadata Grid - 3 Columns -->
        <div class="cover-meta">
            <div class="cover-meta-item">
                <div class="meta-label">Date</div>
                <div class="meta-value">{{ recording.created_at_formatted.split(' at ')[0] if ' at ' in recording.created_at_formatted else recording.created_at_formatted }}</div>
            </div>
            <div class="cover-meta-item">
                <div class="meta-label">Duration</div>
                <div class="meta-value">{{ recording.duration_formatted }}</div>
            </div>
            {% if recording.summary.speakers_count %}
            <div class="cover-meta-item">
                <div class="meta-label">Speakers</div>
                <div class="meta-value">{{ recording.summary.speakers_count }}</div>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Branding Footer -->
    <div class="cover-branding">
        Generated by Braindumpster
    </div>
</div>

<!-- =================================================================
     SUMMARY PAGE - Key Stats Grid
     ================================================================= -->
<div class="content-page">
    <div class="page-header">
        <h2 class="page-title">Executive Summary</h2>
        <p class="page-subtitle">High-level overview of the meeting</p>
    </div>

    <!-- Stats Grid - 3x2 Layout -->
    <div class="summary-grid">
        <div class="summary-stat">
            <div class="stat-value">{{ recording.summary.speakers_count or 1 }}</div>
            <div class="stat-label">Participants</div>
        </div>
        <div class="summary-stat">
            <div class="stat-value">{{ recording.duration_formatted }}</div>
            <div class="stat-label">Duration</div>
        </div>
        <div class="summary-stat">
            <div class="stat-value">{{ (recording.topics|length) if recording.topics else 0 }}</div>
            <div class="stat-label">Topics</div>
        </div>
        <div class="summary-stat">
            <div class="stat-value">{{ recording.summary.key_takeaways|length }}</div>
            <div class="stat-label">Key Points</div>
        </div>
        <div class="summary-stat">
            <div class="stat-value">{{ recording.summary.action_items|length }}</div>
            <div class="stat-label">Action Items</div>
        </div>
        <div class="summary-stat">
            <div class="stat-value">{{ recording.summary.full_transcript|length }}</div>
            <div class="stat-label">Transcript Entries</div>
        </div>
    </div>

    <!-- Brief Summary -->
    {% if recording.summary.brief %}
    <div class="card">
        <div class="card-header">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                </svg>
            </div>
            <h3 class="card-title">Meeting Overview</h3>
        </div>
        <div class="card-content">
            {{ recording.summary.brief }}
        </div>
    </div>
    {% endif %}

    <!-- Detailed Summary -->
    {% if recording.summary.detailed %}
    <div class="card">
        <div class="card-header">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                </svg>
            </div>
            <h3 class="card-title">Detailed Analysis</h3>
        </div>
        <div class="card-content">
            {{ recording.summary.detailed }}
        </div>
    </div>
    {% endif %}
</div>

<!-- =================================================================
     KEY TAKEAWAYS PAGE - Numbered List with Accent Border
     ================================================================= -->
{% if recording.summary.key_takeaways and recording.summary.key_takeaways|length > 0 %}
<div class="content-page page-break">
    <div class="page-header">
        <h2 class="page-title">Key Takeaways</h2>
        <p class="page-subtitle">{{ recording.summary.key_takeaways|length }} important points from the meeting</p>
    </div>

    <div class="card">
        <div class="card-header">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                </svg>
            </div>
            <h3 class="card-title">Key Points Identified</h3>
        </div>
        <div class="card-content">
            {% for takeaway in recording.summary.key_takeaways %}
            <div class="key-point">
                <div class="key-point-bullet"></div>
                <div class="key-point-text">{{ takeaway }}</div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<!-- =================================================================
     ACTION ITEMS PAGE - Checklist Style
     ================================================================= -->
{% if recording.summary.action_items and recording.summary.action_items|length > 0 %}
<div class="content-page page-break">
    <div class="page-header">
        <h2 class="page-title">Action Items</h2>
        <p class="page-subtitle">{{ recording.summary.action_items|length }} tasks and follow-ups identified</p>
    </div>

    <div class="card">
        <div class="card-header">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>
                </svg>
            </div>
            <h3 class="card-title">Action Items</h3>
        </div>
        <div class="card-content">
            {% for item in recording.summary.action_items %}
            <div class="action-item">
                <div class="action-checkbox"></div>
                <div class="action-text">{{ item }}</div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<!-- =================================================================
     FULL TRANSCRIPT - Modern Chat Format
     ================================================================= -->
{% if recording.summary.full_transcript and recording.summary.full_transcript|length > 0 %}
<div class="content-page page-break">
    <div class="page-header">
        <h2 class="page-title">Full Transcript</h2>
        <p class="page-subtitle">Complete conversation record with {{ recording.summary.full_transcript|length }} entries</p>
    </div>

    <div class="card mb-0">
        <div class="card-header">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                </svg>
            </div>
            <h3 class="card-title">Conversation Transcript</h3>
        </div>
        <div class="card-content">
            {% for entry in recording.summary.full_transcript %}
            <div class="transcript-entry">
                <div class="transcript-speaker">
                    {{ entry.speaker }}
                    {% if entry.timestamp %}
                    <span class="transcript-time">{{ entry.timestamp }}</span>
                    {% endif %}
                </div>
                <div class="transcript-text">{{ entry.text }}</div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<!-- =================================================================
     CLOSING PAGE - Professional Footer
     ================================================================= -->
<div class="content-page page-break">
    <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 200mm; text-align: center;">
        <!-- Icon -->
        <div class="cover-icon" style="margin-bottom: 24px;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
        </div>

        <!-- Thank You Message -->
        <h2 style="font-size: 24pt; font-weight: 700; color: #2D3748; margin-bottom: 12px;">
            Thank You
        </h2>
        <p style="font-size: 14pt; color: #718096; margin-bottom: 32px;">
            This report was generated by Braindumpster AI
        </p>

        <!-- Description -->
        <div style="background: #F7FAFC; padding: 24px; border-radius: 8px; max-width: 400px; border: 1px solid #E2E8F0;">
            <p style="font-size: 11pt; color: #718096; line-height: 1.7;">
                Braindumpster uses advanced AI to help you capture, transcribe, and analyze your meetings automatically.
                Get actionable insights from every conversation.
            </p>
        </div>

        <!-- Footer Info -->
        <p style="margin-top: 48px; color: #A0AEC0; font-size: 10pt;">
            Generated on {{ generated_at }}<br>
            Report ID: {{ recording.id[:8] }}
        </p>
    </div>
</div>
{% endblock %}
