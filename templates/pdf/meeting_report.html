{% extends "pdf/base.html" %}

{% block content %}
<!-- Cover Page -->
<div class="cover-page">
    <div class="cover-content">
        <!-- Icon -->
        <div class="cover-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
        </div>

        <!-- Title -->
        <h1 class="cover-title">{{ recording.title }}</h1>
        <p class="cover-subtitle">Meeting Analysis Report</p>

        <!-- Metadata -->
        <div class="cover-meta">
            <div class="cover-meta-item">
                <div class="meta-label">Date</div>
                <div class="meta-value">{{ recording.created_at_formatted }}</div>
            </div>
            <div class="cover-meta-item">
                <div class="meta-label">Duration</div>
                <div class="meta-value">{{ recording.duration_formatted }}</div>
            </div>
            {% if recording.summary.speakers_count %}
            <div class="cover-meta-item">
                <div class="meta-label">Speakers</div>
                <div class="meta-value">{{ recording.summary.speakers_count }}</div>
            </div>
            {% endif %}
            <div class="cover-meta-item">
                <div class="meta-label">Language</div>
                <div class="meta-value">{{ recording.detected_language_display }}</div>
            </div>
        </div>
    </div>

    <!-- Branding -->
    <div class="cover-branding">
        Generated by Braindumpster
    </div>
</div>

<!-- Summary Page -->
<div class="content-page">
    <div class="page-header">
        <h2 class="page-title">Executive Summary</h2>
        <p class="page-subtitle">High-level overview of the meeting</p>
    </div>

    <!-- Quick Stats -->
    <div class="summary-grid">
        <div class="summary-stat">
            <div class="stat-value">{{ recording.summary.speakers_count or 1 }}</div>
            <div class="stat-label">Speakers</div>
        </div>
        <div class="summary-stat">
            <div class="stat-value">{{ recording.summary.key_takeaways|length }}</div>
            <div class="stat-label">Key Points</div>
        </div>
        <div class="summary-stat">
            <div class="stat-value">{{ recording.summary.action_items|length }}</div>
            <div class="stat-label">Action Items</div>
        </div>
        <div class="summary-stat">
            <div class="stat-value">{{ recording.summary.full_transcript|length }}</div>
            <div class="stat-label">Transcript Entries</div>
        </div>
    </div>

    <!-- Brief Summary -->
    {% if recording.summary.brief %}
    <div class="card">
        <div class="card-header">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                </svg>
            </div>
            <h3 class="card-title">Meeting Overview</h3>
        </div>
        <div class="card-content">
            {{ recording.summary.brief }}
        </div>
    </div>
    {% endif %}

    <!-- Detailed Summary -->
    {% if recording.summary.detailed %}
    <div class="card">
        <div class="card-header">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                </svg>
            </div>
            <h3 class="card-title">Detailed Analysis</h3>
        </div>
        <div class="card-content">
            {{ recording.summary.detailed }}
        </div>
    </div>
    {% endif %}

    <div class="page-footer">
        Page 2 of {{ total_pages }}
    </div>
</div>

<!-- Key Points Page -->
{% if recording.summary.key_takeaways and recording.summary.key_takeaways|length > 0 %}
<div class="content-page page-break">
    <div class="page-header">
        <h2 class="page-title">Key Takeaways</h2>
        <p class="page-subtitle">Important points from the meeting</p>
    </div>

    <div class="card">
        <div class="card-header">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                </svg>
            </div>
            <h3 class="card-title">{{ recording.summary.key_takeaways|length }} Key Points Identified</h3>
        </div>
        <div class="card-content">
            {% for takeaway in recording.summary.key_takeaways %}
            <div class="key-point">
                <div class="key-point-bullet"></div>
                <div class="key-point-text">{{ takeaway }}</div>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="page-footer">
        Page 3 of {{ total_pages }}
    </div>
</div>
{% endif %}

<!-- Action Items Page -->
{% if recording.summary.action_items and recording.summary.action_items|length > 0 %}
<div class="content-page page-break">
    <div class="page-header">
        <h2 class="page-title">Action Items</h2>
        <p class="page-subtitle">Tasks and follow-ups identified</p>
    </div>

    <div class="card">
        <div class="card-header">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>
                </svg>
            </div>
            <h3 class="card-title">{{ recording.summary.action_items|length }} Action Items</h3>
        </div>
        <div class="card-content">
            {% for item in recording.summary.action_items %}
            <div class="action-item">
                <div class="action-checkbox"></div>
                <div class="action-text">{{ item }}</div>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="page-footer">
        Page 4 of {{ total_pages }}
    </div>
</div>
{% endif %}

<!-- Full Transcript Pages -->
{% if recording.summary.full_transcript and recording.summary.full_transcript|length > 0 %}
<div class="content-page page-break">
    <div class="page-header">
        <h2 class="page-title">Full Transcript</h2>
        <p class="page-subtitle">Complete conversation record</p>
    </div>

    <div class="card mb-0">
        <div class="card-header">
            <div class="card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                </svg>
            </div>
            <h3 class="card-title">{{ recording.summary.full_transcript|length }} Transcript Entries</h3>
        </div>
        <div class="card-content">
            {% for entry in recording.summary.full_transcript %}
            <div class="transcript-entry">
                <div class="transcript-speaker">
                    {{ entry.speaker }}
                    {% if entry.timestamp %}
                    <span class="transcript-time">{{ entry.timestamp }}</span>
                    {% endif %}
                </div>
                <div class="transcript-text">{{ entry.text }}</div>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="page-footer">
        Page 5+ of {{ total_pages }}
    </div>
</div>
{% endif %}

<!-- Footer Page -->
<div class="content-page page-break">
    <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 200mm; text-align: center;">
        <div class="cover-icon" style="margin-bottom: 24px;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
        </div>
        <h2 style="font-size: 24pt; font-weight: 700; color: var(--text-primary); margin-bottom: 12px;">
            Thank you
        </h2>
        <p style="font-size: 14pt; color: var(--text-secondary); margin-bottom: 32px;">
            This report was generated by Braindumpster AI
        </p>
        <div style="background: linear-gradient(135deg, rgba(89, 191, 242, 0.1), rgba(115, 140, 242, 0.1)); padding: 24px; border-radius: 16px; max-width: 400px;">
            <p style="font-size: 11pt; color: var(--text-secondary); line-height: 1.8;">
                Braindumpster uses advanced AI to help you capture, transcribe, and analyze your meetings automatically.
                Get actionable insights from every conversation.
            </p>
        </div>
        <p style="margin-top: 48px; color: var(--text-muted); font-size: 10pt;">
            Generated on {{ generated_at }}<br>
            Report ID: {{ recording.id[:8] }}
        </p>
    </div>
</div>
{% endblock %}
